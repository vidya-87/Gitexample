@unrep
Feature: Journey 23

  Scenario Outline: Unrep submits claim as owner                                                                                      # src/test/resources/features/unrep/journey23.feature:5
    Given unrep logins into whiplash application
    And claimant exits before submitting the claim
    When user continues for claim creation as '<owner>' , '<involvement_type_v>' and '<ct_preference>' with '<multivrn>','<location>'
    Then claim reference number for unrep claim is created

    Examples: 

  @unrep
  Scenario Outline: Unrep submits claim as owner                                                           # src/test/resources/features/unrep/journey23.feature:12
    Given unrep logins into whiplash application                                                           # ClaimantActionsStepDefs.user_logins_into_whiplash_applicataion_using()
    And claimant exits before submitting the claim                                                         # ClaimantActionsStepDefs.claimant_exit_before_submitting_claim()
    When user continues for claim creation as 'YES' , 'I was the driver' and 'EMAIL' with 'NO','Inside UK' # ClaimantActionsStepDefs.user_continues_For_Claim_Creation(String,String,String,String,String)
    Then claim reference number for unrep claim is created                                                 # ClaimantActionsStepDefs.claim_Reference_Number_Unrep_Is_Created_Successfully()

  Scenario: Compensator receives claim and claim liability sent to TPA # src/test/resources/features/unrep/journey23.feature:14
    Given Claim  is sent to the compensator                            # CompensatorStepDefs.claim_is_sent_to_the_compensator()
    When compensator receives claim and send to TPA                    # CompensatorStepDefs.compensator_receives_claim_send_TPA()
    Then claims acceptance and liability decision is now sent to TPA   # CompensatorStepDefs.claims_acceptance_liability_decision_sent_TPA()

  Scenario: TPA  Accepts full liability                                    # src/test/resources/features/unrep/journey23.feature:19
    Given the claim  has been sent to the TPA workbasket                   # TPAStepDefs.claim_has_been_sent_to_TPA()
    When TPA accepts full liability                                        # TPAStepDefs.tpa_accepts_full_liability()
    Then claims acceptance and liability information is passed to claimant # TPAStepDefs.claims_Acceptance_Denied_Liability_passedto_claimant()

  Scenario: unrep Claimant makes medical provider selection (DME) and adds losses and documents # src/test/resources/features/unrep/journey23.feature:24
    Given the unrep claim moves to full liability                                               # ClaimantActionsStepDefs.claim_full_liability()
    When unrep selects medical preferences for an DME                                           # ClaimantActionsStepDefs.unrep_medical_preference_dme()
    Then medical preferences are sent to Independent Expert                                     # ClaimantActionsStepDefs.medical_preferences_sent_experts()

  Scenario: DME uploads report-No prognosis        # src/test/resources/features/unrep/journey23.feature:29
    Given claimant selects DME                     # DMEDefs.claimant_selects_dme()
    When claimant visits DME and completes checkup # DMEDefs.claimant_visits_dme_complete_checkup()
    Then DME uploads report no prognosis           # DMEDefs.dme_upload_report_no_prognosis()

  Scenario Outline: Claimant add losses and fee       # src/test/resources/features/unrep/journey23.feature:34
    Given DME uploads medical report
    When '<claimant>' add losses and fee
    Then claim will proceed to upload medical reports

    Examples: 

  @unrep
  Scenario Outline: Claimant add losses and fee       # src/test/resources/features/unrep/journey23.feature:40
    Given DME uploads medical report                  # ClaimantActionsStepDefs.dme_uploads_medical_report()
    When 'unrep' add losses and fee                   # ClaimantActionsStepDefs.claimants_add_losses_fee(String)
    Then claim will proceed to upload medical reports # ClaimantActionsStepDefs.proceed_to_upload_medical_reports()

  Scenario: Claimant decides to proceed with offer             # src/test/resources/features/unrep/journey23.feature:43
    Given claimant reviews medical report when uploaded by DME # ClaimantActionsStepDefs.review_medical_report_uploaded_by_dme()
    When Claimant reviews report and proceed to offer          # ClaimantActionsStepDefs.claimant_review_report_and_proceed_to_offer()
    Then claim will be sent to compensator for review          # ClaimantActionsStepDefs.claim_sent_to_compensator_for_review()

  Scenario: Claimant should not be able to add losses/fee # src/test/resources/features/unrep/journey23.feature:48
    Given claimant has proceeded with offer               # ClaimantActionsStepDefs.claimant_has_proceeded_with_offer()
    When Claimant tries to add loss or fee                # ClaimantActionsStepDefs.claimant_tries_to_add_loss_or_fee()
    Then claimant should not be allowed to add loss/fee   # ClaimantActionsStepDefs.claimant_should_not_be_allowd_to_add_loss_fee()

  Scenario: TPA should not be able to add losses/fee # src/test/resources/features/unrep/journey23.feature:53
    Given claimant requests offer to TPA             # TPAStepDefs.claimant_requests_offer()
    When TPA tries to add loss/fee                   # TPAStepDefs.tpa_tries_to_add_loss_fee()
    Then TPA should not be allowed to add loss/fee   # TPAStepDefs.tpa_should_not_be_allowed_to_add_loss_fee()

  Scenario: TPA provides first offer with fee proposal   # src/test/resources/features/unrep/journey23.feature:58
    Given claimant requests offer to TPA                 # TPAStepDefs.claimant_requests_offer()
    When the TPA makes first offer with fee proposal     # TPAStepDefs.compensator_first_offer_fee_proposal()
    Then claim will be sent for claimant acknowledgement # TPAStepDefs.claim_sent_for_claimant_ack()

  Scenario Outline: TPA decides to withdraw the offer # src/test/resources/features/unrep/journey23.feature:63
    Given TPA has made first offer to claimant
    When TPA withdraws the offer at claim '<status>'
    Then TPA gets an option to replace the offer

    Examples: 

  @unrep
  Scenario Outline: TPA decides to withdraw the offer           # src/test/resources/features/unrep/journey23.feature:69
    Given TPA has made first offer to claimant                  # TPAStepDefs.tpa_has_made_first_offer_to_claimant()
    When TPA withdraws the offer at claim 'Pending-ReviewOffer' # TPAStepDefs.tpa_withdraws_the_offer_and_rejects_the_offer(String)
    Then TPA gets an option to replace the offer                # TPAStepDefs.stpa_gets_an_option_to_replace_the_offer()

  Scenario: TPA makes replacement offer         # src/test/resources/features/unrep/journey23.feature:71
    Given TPA has withdrawn the first offer     # TPAStepDefs.tpa_has_withdrawn_the_first_offer()
    When replacement offer is made to claimant  # TPAStepDefs.replacement_offer_is_made_to_claimant()
    Then claim offer is sent to claimant review # TPAStepDefs.claim_offer_is_sent_to_claimant_review()

  Scenario: Claimants accepts final offer from TPA # src/test/resources/features/unrep/journey23.feature:76
    Given TPA has given replacement offer          # ClaimantActionsStepDefs.tpa_has_given_replacement_offer()
    When Claimant accept the replacement offer     # ClaimantActionsStepDefs.claimant_accepts_the_final_offer()
    Then claim is resolved                         # ClaimantActionsStepDefs.claim_is_resolved()
